(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d499032"],{"09b5":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("article-detail",{attrs:{"is-edit":!0}})},r=[],s=o("cb2d"),i={name:"updatearticle",components:{ArticleDetail:s["a"]}},a=i,c=o("2877"),l=Object(c["a"])(a,n,r,!1,null,null,null);e["default"]=l.exports},2423:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return s})),o.d(e,"d",(function(){return i})),o.d(e,"a",(function(){return a})),o.d(e,"e",(function(){return c}));var n=o("b775");function r(t){return Object(n["a"])({url:"/v1/articles",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/v1/articles/".concat(t),method:"get"})}function i(t){return Object(n["a"])({url:"/article/pv",method:"get",params:{pv:t}})}function a(t){return Object(n["a"])({url:"/v1/articles",method:"post",data:t})}function c(t,e){return Object(n["a"])({url:"/v1/articles/".concat(t),method:"put",data:e})}},"391b":function(t,e,o){"use strict";var n=o("996c"),r=o.n(n);r.a},"996c":function(t,e,o){},cb2d:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isLoading?o("div",{staticClass:"app-container"},[o("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{prop:"title"}},[o("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.postForm.title,callback:function(e){t.$set(t.postForm,"title",e)},expression:"postForm.title"}},[t._v("\n        标题\n      ")])],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"文章摘要:"}},[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入"},model:{value:t.postForm.content_short,callback:function(e){t.$set(t.postForm,"content_short",e)},expression:"postForm.content_short"}}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.contentShortLength,expression:"contentShortLength"}],staticClass:"word-counter"},[t._v(t._s(t.contentShortLength)+"字数")])],1),t._v(" "),o("Tinymce",{ref:"editor",staticStyle:{"margin-bottom":"30px"},attrs:{height:400},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}}),t._v(" "),o("MarkdownEditor",{ref:"markdown",staticStyle:{"margin-bottom":"30px"},model:{value:t.postForm.markdown,callback:function(e){t.$set(t.postForm,"markdown",e)},expression:"postForm.markdown"}}),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{label:"状态:"}},[o("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.postForm.is_pulish,callback:function(e){t.$set(t.postForm,"is_pulish",e)},expression:"postForm.is_pulish"}},t._l(t.statusArr,(function(t,e){return o("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)],1),t._v(" "),o("div",{staticStyle:{"text-align":"right"}},[o("el-button",{attrs:{type:"danger"}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确认")])],1)],1):t._e()},r=[],s=o("8256"),i=o("1aba"),a=o("16d8"),c=o("2423"),l={title:"",content:"",content_short:"",is_pulish:0,markdown:""},u={name:"Detail",components:{Tinymce:s["a"],MDinput:i["a"],MarkdownEditor:a["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,o,n){""===o?(t.$message({message:"此项必填",type:"error"}),n(new Error("此项必填"))):n()};return{postForm:Object.assign({},l),tempRoute:{},isLoading:!1,statusArr:["下线","上线"],rules:{title:[{validator:e}]}}},computed:{contentShortLength:function(){return this.postForm.content_short.length}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}else this.isLoading=!0,this.postForm=Object.assign({},l);this.tempRoute=Object.assign({},this.$route)},methods:{fetchData:function(t){var e=this;Object(c["b"])(t).then((function(t){e.postForm=t.data,e.setTagsViewTitle(),e.setPageTitle(),e.isLoading=!0})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){var t=Object.assign({},this.tempRoute,{title:"".concat(this.postForm.title)});this.$store.dispatch("tagsView/updateVisitedView",t)},setPageTitle:function(){document.title="".concat(this.postForm.title)},submitForm:function(){var t=this;this.$refs.postForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isEdit?Object(c["e"])(t.postForm.id,t.postForm).then((function(){t.$notify({title:"Success",type:"success",duration:2e3})})):Object(c["a"])(t.postForm).then((function(){t.$notify({title:"Success",type:"success",duration:2e3})})),t.$router.back()}))}}},m=u,p=(o("391b"),o("2877")),d=Object(p["a"])(m,n,r,!1,null,"1002096f",null);e["a"]=d.exports}}]);