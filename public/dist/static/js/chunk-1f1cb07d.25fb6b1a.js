(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f1cb07d"],{"09f4":function(t,e,s){"use strict";s.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,s,n){return t/=n/2,t<1?s/2*t*t+e:(t--,-s/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,s){var l=a(),r=t-l,o=20,u=0;e="undefined"===typeof e?500:e;var c=function t(){u+=o;var a=Math.easeInOutQuad(u,l,r,e);i(a),u<e?n(t):s&&"function"===typeof s&&s()};c()}},a417:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var n=s("b775");function i(t){return Object(n["a"])({url:"/v1/options",method:"get",params:t})}},fd7b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"filter-container"},[s("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"帐号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.username,callback:function(e){t.$set(t.listQuery,"username",e)},expression:"listQuery.username"}}),t._v(" "),s("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      查询\n    ")]),t._v(" "),s("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAddRole}},[t._v("新增 ")])],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.lists,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"帐号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.username)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.role&&e.row.role.role_name)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("el-tag",{attrs:{type:t._f("statusFilter")(1*n.status)}},[t._v("\n          "+t._s(t.statusArr[n.status])+"\n        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.status?s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(s){return t.handleModifyStatus(e.row,1)}}},[t._v("\n          启用\n        ")]):t._e(),t._v(" "),0!=e.row.status?s("el-button",{attrs:{size:"small"},on:{click:function(s){return t.handleModifyStatus(e.row,0)}}},[t._v("\n         停用\n        ")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(s){return t.handleEdit(e)}}},[t._v("编辑")])]}}])})],1),t._v(" "),s("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getUsers}}),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible,title:"edit"===t.dialogType?"修改":"新增"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{attrs:{model:t.user,"label-width":"80px","label-position":"left"}},[s("el-form-item",{attrs:{label:"帐号"}},[s("el-input",{model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{"show-password":""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"角色"}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.user.role_id,callback:function(e){t.$set(t.user,"role_id",e)},expression:"user.role_id"}},t._l(t.roles,(function(t,e,n){return s("el-option",{key:1*e,attrs:{label:t,value:1*e}})})),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.user.status,callback:function(e){t.$set(t.user,"status",e)},expression:"user.status"}},t._l(t.statusArr,(function(t,e){return s("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)],1),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.confirmRole}},[t._v("确认")])],1)],1)],1)},i=[],a=(s("96cf"),s("3b8d")),l=s("c24f"),r=s("a417"),o=s("333d"),u={username:"",password:"",status:"",role_id:""},c={name:"userslist",components:{Pagination:o["a"]},filters:{statusFilter:function(t){var e=["danger","success"];return e[t]}},data:function(){return{lists:[],total:0,dialogVisible:!1,dialogType:"new",checkStrictly:!1,listLoading:!0,listQuery:{page:1,limit:10,username:void 0},user:Object.assign({},u),statusArr:["停用","启用"],options_key:{key:"roles"},roles:[]}},activated:function(){this.getUsers(),this.getRoles()},methods:{getUsers:function(){var t=this;this.listLoading=!0,Object(l["d"])(this.listQuery).then((function(e){t.lists=e.data.list,t.total=e.data.total,t.listLoading=!1}))},getRoles:function(){var t=this;Object(r["a"])(this.options_key).then((function(e){var s=e.data;t.roles=s}))},handleFilter:function(){this.listQuery.page=1,this.getUsers()()},handleAddRole:function(){this.dialogType="new",this.dialogVisible=!0,this.user=Object.assign({},u)},handleEdit:function(t){this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!0,this.user=t.row},confirmRole:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e="edit"===this.dialogType,!e){t.next=6;break}return t.next=4,Object(l["g"])(this.user.id,this.user);case 4:t.next=9;break;case 6:return t.next=8,Object(l["a"])(this.user);case 8:this.listQuery.page=1;case 9:this.getUsers(),this.dialogVisible=!1,this.$notify({title:"Success",type:"success",duration:2e3});case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleModifyStatus:function(t,e){this.$message({message:"Success",type:"success"}),t.status=e,Object(l["g"])(t.id,t)}}},d=c,f=s("2877"),p=Object(f["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports}}]);